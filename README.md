# LFRSystem
Приложение для контрольно-пропускного пункта с использованием технологии распознавания лиц.
* Поддерживаются дистрибутивы основанные на пакетной базе Debian 10 и выше.
* NCNN
* С/С++

## <div align="center">Развертывание приложения на Ubuntu = 20.04.4 LTS.</div>
### Установка необходимых зависимостей для Linux

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! вписать скрипт !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
```

```

## <div align="center">Сборка</div>
### Клонировать репозиторий
```
git clone https://github.com/ArtemAmelchenko/LFRSystem.git
```
**ПОЛНАЯ СБОРКА ОДНОЙ КОМАНДОЙ**: Перейти в директорию
```
cd build/
make
```



# Удаление компонентов
```
cd build/
make clean 
```





____
# Пользователи

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! добавить в следующей версии !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

____
# Роли

____
# Конфигурации

____
## Описание
Приложение для управления пропускным пунктом. Позволяет настраивать пропускной пункт (добавлять/редактировать/удалять камеры и реле, и связывать их) и изменять базу персональных карт (добавлять/редактировать/удалять персональные карты людей). После настройки приложение позволяет отслеживать происходящие события, а также отправляет их на сервер при установленном подключении.
# Настройка
Для настройки камер нужно выбрать Меню->Камеры->Управление камерами. Пользователю будет показано окно управления камерами. В левой части этого окна находится область добавления камеры. В ней можно выбрать протокол, саму камеру (в случае usb) или ввести текст запроса (в случае rtsp), а также указать вход/выход (в какую сторону направлена камера) и привязать реле. В правой части окна находится область с уже добавленными видеопотоками, где можно посмотреть информацию о них, увидеть сами видеопотоки и удалить их при необходимости.
Для настройки реле нужно выбрать Меню->Устройства->Управление устройствами. В данном окне можно .................
# Редактирование персональных карт
Для редактирования персональных карт нужно выбрать Меню->Файл->Редактирование персональных карт. Открывшееся окно разделено на две части. В левой части находится список персональных карт. В правой - три раздела (просмотр/редактирование/добавление). Для осуществления нужного действия необходимо выбрать соответствующий раздел и взаимодействовать с появившимися полями ввода. Для выбора фото предусмотрена специальная кнопка. После заполнения полей необходимо нажать соответствующую кнопку (редактировать/добавить). Для закрытия окна с сохранением изменений нужно нажать "ОК", после чего согласиться с внесением изменений.
# Отслеживание происходящих событий.
Событием считается распознавание в кадре лица, внесённого в базу. Возможны следующие случаи:
Нарушено зонирование (человек не входил, но пытается выйти)
Спуфинг (распознана попытка обмана путём показа фото вместо реального лица)
ОК (всё в порядке, в таком случае откроется соответствующий турникет и человек будет считаться пропущенным)
В левой нижней части главного окна отображаются последние пять событий и соответствующие им карточки. К какому из перечисленных случаев относится событие, можно понять по соответствующей надписи (ЗОН, СПУФ, ОК). Правая нижняя часть главного окна отображает количество человек в здании, а также сходство и достоверность последнего распознавания лица.
# Влияние освещения на качество распознавания
Для корректной работы программы требуется качественное освещение тех областей, где предполагается нахождение лиц людей при их взгляде в камеру (проще говоря, лица должны быть нормально освещены). В случае черезмерного освещения программа с большой вероятностью будет показывать меньший уровень сходства и его может не хватить для того, чтобы программа посчитала человека идентифицированным. Также, в этом случае возможно падение уровня достоверности (из за появления бликов и неестественного света).
В случае недостаточного освещения система работает лучше, чем при избыточном. Распознавание и идентификация прекращаются, когда в кадре становится совсем темно.
Исходя из вышесказанного, при настройке освещения стоит ориентироваться на средний уровень света с уклоном в тёмную сторону и избегать появления бликов, ощутимых различий в освещении разных частей лица.

